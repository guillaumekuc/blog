<!-- 
  Dependencies: 
  - Font Awesome (fa-chevron-up icon)
  - Style inheritances
-->


<div id="back-to-top-button" aria-label="Go back to top">
  <i class="fa-solid fa-chevron-up"></i>
</div>

<style>
  #back-to-top-button {
    /* inherit colors */
    --bgColor: var(--medium-value);
    --hover-bgColor: var(--primary-color);
    --color: var(--white-value);
    --breakpoint: 1333px;
    /* 
    * Calculation: 860px + (90px * 4) + (48px * 2) + 17px = 1333px
    * Components: main-column + spacers + button-widths + scrollbar
    */

    position: fixed;
    display: flex;

    bottom: 70px;
    right: calc((100% - 860px)/2 - 90px - 48px); /* (total width - central column)/2 - spacer - buttonWidth. Spacer is equal to distance between header column and content column*/

    width: 48px;
    height: 48px;
    border-radius: 8px;
    
    opacity: 0;
    pointer-events: none;

    cursor: pointer;

    background-color: var(--bgColor);
    color: var(--color);
    
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 1.25rem;

    transform-origin: bottom center;
    transform: translateY(200%); /* appears from bottom */
    
    transition: all 0s steps(1);
    z-index: 999;
  }

  #back-to-top-button.visible {
    pointer-events: all;
    opacity: 1;
    transform: translateY(0);
    transition: all 0.16s steps(3);
  }

  #back-to-top-button.visible:hover {
    background: var(--hover-bgColor);
    animation: bounceSteps 1s infinite steps(1, start);
  }

  /* idle bounce animation: squash & stretch, volume conservation */
  @keyframes bounceSteps {
    0% { transform: translateY(0px) scaleY(1) scaleX(1); }
    8% { transform: translateY(0.00px) scaleY(0.9) scaleX(1.1); }
    17% { transform: translateY(0px) scaleY(0.85) scaleX(1.15); }
    25% { transform: translateY(0px) scaleY(0.8) scaleX(1.2); }
    33% { transform: translateY(0px) scaleY(0.80) scaleX(1.20); }
    42% { transform: translateY(-4px) scaleY(0.9) scaleX(1.1); }
    50% { transform: translateY(-8px) scaleY(1.03) scaleX(0.97); }
    58% { transform: translateY(-11px) scaleY(1.05) scaleX(0.95); }
    67% { transform: translateY(-15px) scaleY(1.08) scaleX(0.92); }
    75% { transform: translateY(-15.5px) scaleY(1.100) scaleX(0.900); }
    83% { transform: translateY(-16px) scaleY(1.12) scaleX(0.88); }
    92% { transform: translateY(-8px) scaleY(1.05) scaleX(0.95); }
    100% { transform: translateY(0px) scaleY(1) scaleX(1); }
  }

  /* Responsive adjustments */
  @media print, screen and (max-width: 1333px) {
    #back-to-top-button {
      width: 40px;
      height: 40px;
      right: 20px;
      bottom: 20px;
    }
  }
</style>

<script>
  (function() {
    const backToTopBtn = document.getElementById('back-to-top-button');
    
    function toggleButtonVisibility() {
      if (window.scrollY > 300) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    }
    
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
    
    // Event listeners
    window.addEventListener('scroll', toggleButtonVisibility);
    backToTopBtn.addEventListener('click', scrollToTop);
    
    // Initial check
    toggleButtonVisibility();

  })();
</script>